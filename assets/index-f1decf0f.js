import{k,n as z,j as e,m as D,r,_ as L,p as N,q as E,A as H,C as o,d as $,S as A,H as d,a as w,T as F,N as R}from"./index-334d877a.js";import{b as T}from"./index-4718dee4.js";import{u as I,e as C}from"./utils-20123f34.js";import{f as P,u as q,M as G,a as U,b as V,c as W,d as J,e as K}from"./chunk-4FCEGNGT-56d870f0.js";import{u as y}from"./chunk-BBVTFCMB-ede98c8d.js";import{C as Q}from"./chunk-5MKCW436-f5794745.js";import{B as _}from"./chunk-UVUR7MCU-20f68384.js";import{B as v}from"./chunk-PULVB27S-7adda51e.js";import{S as X}from"./chunk-NEK3OOAM-41198d0c.js";import{I as S}from"./chunk-QINAG4RG-1689f580.js";var M=k((i,l)=>{const{className:a,...p}=i,x=z("chakra-modal__footer",a),h={display:"flex",alignItems:"center",justifyContent:"flex-end",...P().footer};return e.jsx(D.footer,{ref:l,...p,__css:h,className:x})});M.displayName="ModalFooter";const Y=r.lazy(()=>L(()=>import("./index-82d568de.js"),["assets/index-82d568de.js","assets/index-334d877a.js","assets/index-a1d4600f.css","assets/utils-20123f34.js","assets/chunk-QINAG4RG-1689f580.js","assets/index-b87c4dee.css"]));function ce(){const[i,l]=r.useState(!1),[a,p]=r.useState(null),[x,m]=y(!0),[h,f]=y(!1),j=I(),b=N(),[s,g]=r.useState(null),O=E(),c=q();r.useEffect(()=>{(async()=>{m.on();try{const{data:n}=await w.get(`https://api.silentclient.net/store/get_item?type=cases&id=${b.id}`);p(n.case)}catch(n){C(n,j),O("/cases")}finally{m.off()}})()},[]);const u=r.useContext(H),B=t=>{g(t),c.onOpen(),l(!1)};return x?e.jsx(o,{w:"full",p:5,children:e.jsx($,{size:"xl",color:"white"})}):a?e.jsxs(e.Fragment,{children:[e.jsx(Q,{p:4,bgColor:"#131313",maxW:"container.sm",minH:"230px",h:"230px",borderRadius:"xl",overflow:"hidden",maxH:"230px",children:!i&&e.jsx(o,{children:e.jsxs(A,{alignItems:"center",direction:"column",spacing:1,children:[e.jsx(d,{size:"md",children:a.name}),e.jsx(T.LazyLoadImage,{width:"170px",height:"170px",src:`https://api.silentclient.net${a.preview}`})]})})||e.jsx(r.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(Y,{result:s,handleDrop:B,item:a})})}),e.jsx(o,{children:e.jsx(_,{isLoading:h,isDisabled:i,w:["full","150px"],mt:2,onClick:async()=>{var t;if(!u.props.account){window.location.href=`https://auth.silentclient.net/login?redirect_url=${window.location.href}`;return}f.on();try{const{data:n}=await w.post("https://api.silentclient.net/store/open_case",{id:a.id},{headers:{Authorization:`Bearer ${(t=u.props)==null?void 0:t.accessToken}`}});await u.updateUser(),g({...n.drop,alreadyOwned:n.alreadyOwned}),l(!0)}catch(n){C(n,j)}finally{f.off()}},children:"Open Case"})}),e.jsxs(v,{mt:5,children:[e.jsx(o,{children:e.jsx(d,{size:"md",children:"Case Content"})}),e.jsx(X,{mt:2,spacing:2,columns:[2,3,5],children:a.items.map(t=>e.jsx(v,{userSelect:"none",p:2,bgColor:"#131313",children:t.preview?e.jsxs(e.Fragment,{children:[e.jsx(o,{children:e.jsx(S,{width:"100px",height:"100px",src:t.preview?`https://api.silentclient.net${t.preview}`:""})}),e.jsx(F,{size:"sm",mt:2,children:t.name})]}):e.jsx(o,{h:"full",children:e.jsx(d,{children:t.name})})}))}),e.jsxs(G,{isOpen:c.isOpen,onClose:c.onClose,children:[e.jsx(U,{}),e.jsxs(V,{bgColor:"#131313",children:[e.jsx(W,{children:s==null?void 0:s.name}),e.jsx(J,{}),e.jsx(K,{children:e.jsx(o,{w:"full",children:(s==null?void 0:s.preview)&&e.jsx(S,{w:"300px",h:"300px",src:`https://api.silentclient.net${s==null?void 0:s.preview}`})||e.jsx(o,{h:"300px",w:"300px",children:e.jsx(d,{textAlign:"center",w:"300px",children:s==null?void 0:s.name})})})}),e.jsx(M,{children:e.jsx(_,{onClick:c.onClose,w:"full",children:"Claim"})})]})]})]})]}):e.jsx(R,{to:"/cases"})}export{ce as default};
