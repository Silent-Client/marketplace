import{r as n,A as g,w as C,j as t,C as c,h as j,S as p,L as y,d,H as S}from"./index-b9857d62.js";import{h as _}from"./moment-fbc5633a.js";import{u as k,e as m}from"./utils-c0b7d60e.js";import{M as v}from"./Main-396c207c.js";import{u as $}from"./chunk-BBVTFCMB-fd463af7.js";import{B as h}from"./chunk-UVUR7MCU-fdc8386a.js";import{B as I}from"./chunk-PULVB27S-5f5743b7.js";import"./chunk-QINAG4RG-e43e77dc.js";import"./index-0e946e11.js";import"./chunk-6CVSDS6C-1069c691.js";import"./index-ced25b69.js";import"./chunk-5MKCW436-ce40a3c7.js";import"./chunk-NEK3OOAM-dab77d34.js";function N(){const r=n.useContext(g),[o,x]=n.useState([]),[u,i]=$(!0),s=k(),a=C(),l=async()=>{i.on();try{const{data:e}=await d.get("https://api.silentclient.net/marketplace/my_lots",{headers:{Authorization:`Bearer ${r.props.accessToken}`}});x(e.items)}catch(e){m(e,s)}finally{i.off()}};return n.useEffect(()=>{l()},[]),u?t.jsx(c,{w:"full",p:2,children:t.jsx(j,{size:"xl",color:"white"})}):(o==null?void 0:o.length)!==0?t.jsxs(p,{direction:"column",spacing:2,children:[t.jsx(h,{w:"full",h:"35px",fontSize:"xl",borderRadius:"8px",paddingInlineStart:6,paddingInlineEnd:6,_hover:{bgColor:"#202020"},_active:{bgColor:"#252525"},bgColor:"#131313",onClick:()=>a("/sell"),children:"Sell Item"}),o==null?void 0:o.map(e=>t.jsx(v,{name:e.item.name,description:`Listed on ${_(e.created_at).format("D MMMM")}`,price:`${(e.price/100).toFixed(2)}$`,preview:`https://api.silentclient.net${e.item.preview}`,href:`/listings/${e.item_type}/${e.item_id}`,footer:t.jsx(y,{opacity:"0.8",textDecoration:"underline",_hover:{opacity:"1"},fontSize:"md",onClick:async()=>{try{await d.post(`https://api.silentclient.net/marketplace/item/${e.item_type}/${e.item_id}/delete_lot`,{id:e.id},{headers:{Authorization:`Bearer ${r.props.accessToken}`}})}catch(f){m(f,s)}finally{l()}},children:"Remove"})}))]}):t.jsx(c,{minH:"48px",children:t.jsxs(p,{alignItems:"center",direction:"column",spacing:1,children:[t.jsx(S,{size:"sm",children:"Sell listings not found"}),t.jsx(I,{children:t.jsx(h,{borderRadius:"8px",paddingInlineStart:6,paddingInlineEnd:6,_hover:{bgColor:"#202020"},_active:{bgColor:"#252525"},bgColor:"#131313",h:"28px",fontSize:"md",onClick:()=>a("/sell"),children:"Sell Item"})})]})})}export{N as default};
