import{o as k,t as z,j as e,s as D,r,_ as L,v as N,w as E,A as H,C as o,h as $,S as A,H as d,d as w,T as F,N as R}from"./index-b9857d62.js";import{b as T}from"./index-0e946e11.js";import{u as I,e as C}from"./utils-c0b7d60e.js";import{f as P,u as G,M as U,a as V,b as W,c as q,d as J,e as K}from"./chunk-4FCEGNGT-78e016fa.js";import{u as y}from"./chunk-BBVTFCMB-fd463af7.js";import{C as Q}from"./chunk-5MKCW436-ce40a3c7.js";import{B as _}from"./chunk-UVUR7MCU-fdc8386a.js";import{B as v}from"./chunk-PULVB27S-5f5743b7.js";import{S as X}from"./chunk-NEK3OOAM-dab77d34.js";import{I as S}from"./chunk-QINAG4RG-e43e77dc.js";var M=k((i,l)=>{const{className:a,...p}=i,x=z("chakra-modal__footer",a),m={display:"flex",alignItems:"center",justifyContent:"flex-end",...P().footer};return e.jsx(D.footer,{ref:l,...p,__css:m,className:x})});M.displayName="ModalFooter";const Y=r.lazy(()=>L(()=>import("./index-68db2ca7.js"),["assets/index-68db2ca7.js","assets/index-b9857d62.js","assets/index-a1d4600f.css","assets/utils-c0b7d60e.js","assets/chunk-QINAG4RG-e43e77dc.js","assets/index-d8256e71.css"]));function ce(){const[i,l]=r.useState(!1),[a,p]=r.useState(null),[x,h]=y(!0),[m,f]=y(!1),j=I(),b=N(),[s,g]=r.useState(null),O=E(),c=G();r.useEffect(()=>{(async()=>{h.on();try{const{data:n}=await w.get(`https://api.silentclient.net/store/get_item?type=cases&id=${b.id}`);p(n.case)}catch(n){C(n,j),O("/cases")}finally{h.off()}})()},[]);const u=r.useContext(H),B=t=>{g(t),c.onOpen(),l(!1)};return x?e.jsx(o,{w:"full",p:5,children:e.jsx($,{size:"xl",color:"white"})}):a?e.jsxs(e.Fragment,{children:[e.jsx(Q,{p:4,bgColor:"#131313",maxW:"container.sm",minH:"230px",h:"230px",borderRadius:"xl",overflow:"hidden",maxH:"230px",children:!i&&e.jsx(o,{children:e.jsxs(A,{alignItems:"center",direction:"column",spacing:1,children:[e.jsx(d,{size:"md",children:a.name}),e.jsx(T.LazyLoadImage,{width:"170px",height:"170px",src:`https://api.silentclient.net${a.preview}`})]})})||e.jsx(r.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(Y,{result:s,handleDrop:B,item:a})})}),e.jsx(o,{children:e.jsx(_,{isLoading:m,isDisabled:i,w:["full","150px"],mt:2,onClick:async()=>{var t;if(!u.props.account){window.location.href=`https://auth.silentclient.net/login?redirect_url=${window.location.href}`;return}f.on();try{const{data:n}=await w.post("https://api.silentclient.net/store/open_case",{id:a.id},{headers:{Authorization:`Bearer ${(t=u.props)==null?void 0:t.accessToken}`}});await u.updateUser(),g({...n.drop,alreadyOwned:n.alreadyOwned}),l(!0)}catch(n){C(n,j)}finally{f.off()}},children:"Open Case"})}),e.jsxs(v,{mt:5,children:[e.jsx(o,{children:e.jsx(d,{size:"md",children:"Case Content"})}),e.jsx(X,{mt:2,spacing:2,columns:[2,3,5],children:a.items.map(t=>e.jsx(v,{userSelect:"none",p:2,bgColor:"#131313",children:t.preview?e.jsxs(e.Fragment,{children:[e.jsx(o,{children:e.jsx(S,{width:"100px",height:"100px",src:t.preview?`https://api.silentclient.net${t.preview}`:""})}),e.jsx(F,{size:"sm",mt:2,children:t.name})]}):e.jsx(o,{h:"full",children:e.jsx(d,{children:t.name})})}))}),e.jsxs(U,{isOpen:c.isOpen,onClose:c.onClose,children:[e.jsx(V,{}),e.jsxs(W,{bgColor:"#131313",children:[e.jsx(q,{children:s==null?void 0:s.name}),e.jsx(J,{}),e.jsx(K,{children:e.jsx(o,{w:"full",children:(s==null?void 0:s.preview)&&e.jsx(S,{w:"300px",h:"300px",src:`https://api.silentclient.net${s==null?void 0:s.preview}`})||e.jsx(o,{h:"300px",w:"300px",children:e.jsx(d,{textAlign:"center",w:"300px",children:s==null?void 0:s.name})})})}),e.jsx(M,{children:e.jsx(_,{onClick:c.onClose,w:"full",children:"Claim"})})]})]})]})]}):e.jsx(R,{to:"/cases"})}export{ce as default};
