import{u as F,r as u,i as S,j as e,h as M,f as je,v as re,w as ve,d as we,c as q,b as G,x as ke,e as Se,o as Te,k as L,S as v,C as w,H as I,T as _,L as Q,q as _e,A as R,t as Y,n as D,y as Ie,R as De}from"./index-080067de.js";import{I as oe}from"./chunk-QINAG4RG-591fb5d3.js";import{u as J,e as P}from"./utils-afb13073.js";import{b as Pe,C as Me}from"./index-3c5773e8.js";import{c as ze,l as Le,B as K}from"./index-de4e1424.js";import{u as Z}from"./chunk-BBVTFCMB-ae0d35d8.js";import{m as le,I as Re,B as O}from"./chunk-6CVSDS6C-7fb50b16.js";import{h as ie}from"./moment-fbc5633a.js";function $e(s){const{value:t,defaultValue:n,onChange:l,shouldUpdate:o=(h,f)=>h!==f}=s,r=F(l),c=F(o),[a,d]=u.useState(n),p=t!==void 0,m=p?t:a,g=F(h=>{const y=typeof h=="function"?h(m):h;c(m,y)&&(p||d(y),r(y))},[p,r,m,c]);return[m,g]}var ce=S(function(t,n){const{templateAreas:l,gap:o,rowGap:r,columnGap:c,column:a,row:d,autoFlow:p,autoRows:m,templateRows:g,autoColumns:h,templateColumns:f,...y}=t,C={display:"grid",gridTemplateAreas:l,gridGap:o,gridRowGap:r,gridColumnGap:c,gridAutoColumns:h,gridColumn:a,gridRow:d,gridAutoFlow:p,gridAutoRows:m,gridTemplateRows:g,gridTemplateColumns:f};return e.jsx(M.div,{ref:n,__css:C,...y})});ce.displayName="Grid";var H=S(function(t,n){const{columns:l,spacingX:o,spacingY:r,spacing:c,minChildWidth:a,...d}=t,p=je(),m=a?Ae(a,p):Be(l);return e.jsx(ce,{ref:n,gap:c,columnGap:o,rowGap:r,templateColumns:m,...d})});H.displayName="SimpleGrid";function Ee(s){return typeof s=="number"?`${s}px`:s}function Ae(s,t){return re(s,n=>{const l=ve("sizes",n,Ee(n))(t);return n===null?null:`repeat(auto-fit, minmax(${l}, 1fr))`})}function Be(s){return re(s,t=>t===null?null:`repeat(${t}, minmax(0, 1fr))`)}function Fe(){const s=u.useRef(new Map),t=s.current,n=u.useCallback((o,r,c,a)=>{s.current.set(c,{type:r,el:o,options:a}),o.addEventListener(r,c,a)},[]),l=u.useCallback((o,r,c,a)=>{o.removeEventListener(r,c,a),s.current.delete(c)},[]);return u.useEffect(()=>()=>{t.forEach((o,r)=>{l(o.el,o.type,r,o.options)})},[l,t]),{add:n,remove:l}}function N(s){const t=s.target,{tagName:n,isContentEditable:l}=t;return n!=="INPUT"&&n!=="TEXTAREA"&&l!==!0}function Ne(s={}){const{ref:t,isDisabled:n,isFocusable:l,clickOnEnter:o=!0,clickOnSpace:r=!0,onMouseDown:c,onMouseUp:a,onClick:d,onKeyDown:p,onKeyUp:m,tabIndex:g,onMouseOver:h,onMouseLeave:f,...y}=s,[C,T]=u.useState(!0),[j,x]=u.useState(!1),b=Fe(),pe=i=>{i&&i.tagName!=="BUTTON"&&T(!1)},fe=C?g:g||0,E=n&&!l,ne=u.useCallback(i=>{if(n){i.stopPropagation(),i.preventDefault();return}i.currentTarget.focus(),d==null||d(i)},[n,d]),A=u.useCallback(i=>{j&&N(i)&&(i.preventDefault(),i.stopPropagation(),x(!1),b.remove(document,"keyup",A,!1))},[j,b]),he=u.useCallback(i=>{if(p==null||p(i),n||i.defaultPrevented||i.metaKey||!N(i.nativeEvent)||C)return;const z=o&&i.key==="Enter";r&&i.key===" "&&(i.preventDefault(),x(!0)),z&&(i.preventDefault(),i.currentTarget.click()),b.add(document,"keyup",A,!1)},[n,C,p,o,r,b,A]),me=u.useCallback(i=>{if(m==null||m(i),n||i.defaultPrevented||i.metaKey||!N(i.nativeEvent)||C)return;r&&i.key===" "&&(i.preventDefault(),x(!1),i.currentTarget.click())},[r,C,n,m]),B=u.useCallback(i=>{i.button===0&&(x(!1),b.remove(document,"mouseup",B,!1))},[b]),xe=u.useCallback(i=>{if(i.button!==0)return;if(n){i.stopPropagation(),i.preventDefault();return}C||x(!0),i.currentTarget.focus({preventScroll:!0}),b.add(document,"mouseup",B,!1),c==null||c(i)},[n,C,c,b,B]),be=u.useCallback(i=>{i.button===0&&(C||x(!1),a==null||a(i))},[a,C]),ge=u.useCallback(i=>{if(n){i.preventDefault();return}h==null||h(i)},[n,h]),ye=u.useCallback(i=>{j&&(i.preventDefault(),x(!1)),f==null||f(i)},[j,f]),se=le(t,pe);return C?{...y,ref:se,type:"button","aria-disabled":E?void 0:n,disabled:E,onClick:ne,onMouseDown:c,onMouseUp:a,onKeyUp:m,onKeyDown:p,onMouseOver:h,onMouseLeave:f}:{...y,ref:se,role:"button","data-active":we(j),"aria-disabled":n?"true":void 0,tabIndex:E?void 0:fe,onClick:ne,onMouseDown:xe,onMouseUp:be,onKeyUp:me,onKeyDown:he,onMouseOver:ge,onMouseLeave:ye}}var[Ue,Ge,Ke,Oe]=ze();function He(s){var t;const{defaultIndex:n,onChange:l,index:o,isManual:r,isLazy:c,lazyBehavior:a="unmount",orientation:d="horizontal",direction:p="ltr",...m}=s,[g,h]=u.useState(n??0),[f,y]=$e({defaultValue:n??0,value:o,onChange:l});u.useEffect(()=>{o!=null&&h(o)},[o]);const C=Ke(),T=u.useId();return{id:`tabs-${(t=s.id)!=null?t:T}`,selectedIndex:f,focusedIndex:g,setSelectedIndex:y,setFocusedIndex:h,isManual:r,isLazy:c,lazyBehavior:a,orientation:d,descendants:C,direction:p,htmlProps:m}}var[Ve,$]=q({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function We(s){const{focusedIndex:t,orientation:n,direction:l}=$(),o=Ge(),r=u.useCallback(c=>{const a=()=>{var x;const b=o.nextEnabled(t);b&&((x=b.node)==null||x.focus())},d=()=>{var x;const b=o.prevEnabled(t);b&&((x=b.node)==null||x.focus())},p=()=>{var x;const b=o.firstEnabled();b&&((x=b.node)==null||x.focus())},m=()=>{var x;const b=o.lastEnabled();b&&((x=b.node)==null||x.focus())},g=n==="horizontal",h=n==="vertical",f=c.key,y=l==="ltr"?"ArrowLeft":"ArrowRight",C=l==="ltr"?"ArrowRight":"ArrowLeft",j={[y]:()=>g&&d(),[C]:()=>g&&a(),ArrowDown:()=>h&&a(),ArrowUp:()=>h&&d(),Home:p,End:m}[f];j&&(c.preventDefault(),j(c))},[o,t,n,l]);return{...s,role:"tablist","aria-orientation":n,onKeyDown:G(s.onKeyDown,r)}}function Xe(s){const{isDisabled:t=!1,isFocusable:n=!1,...l}=s,{setSelectedIndex:o,isManual:r,id:c,setFocusedIndex:a,selectedIndex:d}=$(),{index:p,register:m}=Oe({disabled:t&&!n}),g=p===d,h=()=>{o(p)},f=()=>{a(p),!r&&!(t&&n)&&o(p)},y=Ne({...l,ref:le(m,s.ref),isDisabled:t,isFocusable:n,onClick:G(s.onClick,h)}),C="button";return{...y,id:de(c,p),role:"tab",tabIndex:g?0:-1,type:C,"aria-selected":g,"aria-controls":ue(c,p),onFocus:t?void 0:G(s.onFocus,f)}}var[qe,Qe]=q({});function Ye(s){const t=$(),{id:n,selectedIndex:l}=t,r=ke(s.children).map((c,a)=>u.createElement(qe,{key:a,value:{isSelected:a===l,id:ue(n,a),tabId:de(n,a),selectedIndex:l}},c));return{...s,children:r}}function Je(s){const{children:t,...n}=s,{isLazy:l,lazyBehavior:o}=$(),{isSelected:r,id:c,tabId:a}=Qe(),d=u.useRef(!1);r&&(d.current=!0);const p=Le({wasSelected:d.current,isSelected:r,enabled:l,mode:o});return{tabIndex:0,...n,children:p?t:null,role:"tabpanel","aria-labelledby":a,hidden:!r,id:c}}function de(s,t){return`${s}--tab-${t}`}function ue(s,t){return`${s}--tabpanel-${t}`}var[Ze,ee]=q({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),V=S(function(t,n){const l=Se("Tabs",t),{children:o,className:r,...c}=Te(t),{htmlProps:a,descendants:d,...p}=He(c),m=u.useMemo(()=>p,[p]),{isFitted:g,...h}=a,f={position:"relative",...l.root};return e.jsx(Ue,{value:d,children:e.jsx(Ve,{value:m,children:e.jsx(Ze,{value:l,children:e.jsx(M.div,{className:L("chakra-tabs",r),ref:n,...h,__css:f,children:o})})})})});V.displayName="Tabs";var W=S(function(t,n){const l=We({...t,ref:n}),r={display:"flex",...ee().tablist};return e.jsx(M.div,{...l,className:L("chakra-tabs__tablist",t.className),__css:r})});W.displayName="TabList";var k=S(function(t,n){const l=Je({...t,ref:n}),o=ee();return e.jsx(M.div,{outline:"0",...l,className:L("chakra-tabs__tab-panel",t.className),__css:o.tabpanel})});k.displayName="TabPanel";var X=S(function(t,n){const l=Ye(t),o=ee();return e.jsx(M.div,{...l,width:"100%",ref:n,className:L("chakra-tabs__tab-panels",t.className),__css:o.tabpanels})});X.displayName="TabPanels";const ae="/assets/minecraft_hero-62e653dc.png";function et(){return e.jsxs(v,{zIndex:2,h:["auto","30vh"],direction:["column","row"],justifyContent:"space-between",spacing:[4,2],alignItems:"center",children:[e.jsx(w,{display:["none","flex"],position:"absolute",w:"full",top:"70px",justifyContent:"start",children:e.jsx(oe,{w:"30%",src:ae})}),e.jsx(w,{position:["unset","absolute"],w:"full",h:"full",justifyContent:"center",children:e.jsxs(v,{textAlign:"center",direction:"column",spacing:[1,2],children:[e.jsx(I,{size:"lg",fontWeight:500,children:"Welcome to SIlent Client Marketplace! ðŸ‘‹"}),e.jsx(_,{fontSize:"xl",opacity:"0.8",children:"Buy and sell cosmetics in a few clicks"})]})}),e.jsx(w,{display:["flex","none"],children:e.jsx(oe,{ml:"40px",w:"300px",src:ae})})]})}function te(s){const t=u.useRef(null),n=u.useRef(null),l=u.useRef(null);return u.useEffect(()=>{var o;(o=t.current)==null||o.addEventListener("click",function(r){var c,a;((c=n.current)!=null&&c.matches(":hover")||(a=l.current)!=null&&a.matches(":hover"))&&r.preventDefault()})},[]),e.jsxs(Q,{ref:t,zIndex:3,bgColor:"#131313",p:2,borderRadius:"10px",border:"1px solid",borderColor:"transparent",_hover:{borderColor:"white",textDecoration:"none"},as:_e,to:s.href,children:[e.jsxs(v,{alignItems:"center",direction:"row",justifyContent:"space-between",children:[e.jsxs(v,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(Pe.LazyLoadImage,{src:s.preview,width:"80px",height:"80px"}),e.jsxs(v,{direction:"column",spacing:0,children:[e.jsx(I,{size:"sm",children:s.name}),e.jsx(_,{opacity:"0.8",fontSize:"md",children:s.description}),e.jsx(I,{size:"sm",children:s.price})]})]}),s.footer&&e.jsx(K,{display:["none","block"],ref:n,children:s.footer})||null]}),s.footer&&e.jsx(K,{display:["block","none"],alignContent:"end",textAlign:"end",ref:l,children:s.footer})||null]})}function U({apiUrl:s,description:t=r=>`Quantity: ${r.count}`,price:n=r=>`Started at ${(r.min_price/100).toFixed(2)}$`,footer:l,showSearch:o}){const r=u.useContext(R),[c,a]=u.useState([]),[d,p]=Z(!0),m=J(),[g,h]=u.useState("");return u.useEffect(()=>{(async()=>{p.on();try{const{data:y}=await D.get(s,{headers:{Authorization:`Bearer ${r.props.accessToken}`}});a(y.items)}catch(y){P(y,m)}finally{p.off()}})()},[]),d?e.jsx(w,{w:"full",p:2,children:e.jsx(Y,{size:"xl",color:"white"})}):e.jsxs(v,{direction:"column",spacing:2,children:[o&&e.jsx(Re,{h:"35px",bgColor:"#131313",borderColor:"transparent",borderRadius:"8px",placeholder:"Search",fontSize:"xl",_placeholder:{color:"rgba(255, 255, 255, 0.60)"},_hover:{borderColor:"transparent",bgColor:"whiteAlpha.300"},_focus:{borderColor:"white",boxShadow:"none",bgColor:"#252525"},value:g,onChange:f=>h(f.currentTarget.value)}),c==null?void 0:c.filter(f=>g.trim()===""||f.name.toLowerCase().includes(g.toLowerCase().trim())).map(f=>e.jsx(te,{name:f.name,description:t(f),price:n(f),preview:`https://api.silentclient.net${f.preview}`,href:`/listings/${f.type}/${f.id}`,footer:l?l(f):void 0}))]})}function tt(){const s=u.useContext(R),[t,n]=u.useState([]),[l,o]=Z(!0),r=J(),c=Ie(),a=async()=>{o.on();try{const{data:d}=await D.get("https://api.silentclient.net/marketplace/my_lots",{headers:{Authorization:`Bearer ${s.props.accessToken}`}});n(d.items)}catch(d){P(d,r)}finally{o.off()}};return u.useEffect(()=>{a()},[]),l?e.jsx(w,{w:"full",p:2,children:e.jsx(Y,{size:"xl",color:"white"})}):(t==null?void 0:t.length)!==0?e.jsxs(v,{direction:"column",spacing:2,children:[e.jsx(O,{w:"full",h:"35px",fontSize:"xl",borderRadius:"8px",paddingInlineStart:6,paddingInlineEnd:6,_hover:{bgColor:"#202020"},_active:{bgColor:"#252525"},bgColor:"#131313",onClick:()=>c("/sell"),children:"Sell Item"}),t==null?void 0:t.map(d=>e.jsx(te,{name:d.item.name,description:`Listed on ${ie(d.created_at).format("D MMMM")}`,price:`${(d.price/100).toFixed(2)}$`,preview:`https://api.silentclient.net${d.item.preview}`,href:`/listings/${d.item_type}/${d.item_id}`,footer:e.jsx(Q,{opacity:"0.8",textDecoration:"underline",_hover:{opacity:"1"},fontSize:"md",onClick:async()=>{try{await D.post(`https://api.silentclient.net/marketplace/item/${d.item_type}/${d.item_id}/delete_lot`,{id:d.id},{headers:{Authorization:`Bearer ${s.props.accessToken}`}})}catch(p){P(p,r)}finally{a()}},children:"Remove"})}))]}):e.jsx(w,{minH:"48px",children:e.jsxs(v,{alignItems:"center",direction:"column",spacing:1,children:[e.jsx(I,{size:"sm",children:"Sell listings not found"}),e.jsx(K,{children:e.jsx(O,{borderRadius:"8px",paddingInlineStart:6,paddingInlineEnd:6,_hover:{bgColor:"#202020"},_active:{bgColor:"#252525"},bgColor:"#131313",h:"28px",fontSize:"md",onClick:()=>c("/sell"),children:"Sell Item"})})]})})}function nt(){const s=u.useContext(R),[t,n]=u.useState([]),[l,o]=Z(!0),r=J(),c=async()=>{o.on();try{const{data:a}=await D.get("https://api.silentclient.net/marketplace/my_orders",{headers:{Authorization:`Bearer ${s.props.accessToken}`}});n(a.items)}catch(a){P(a,r)}finally{o.off()}};return u.useEffect(()=>{c()},[]),l?e.jsx(w,{w:"full",p:2,children:e.jsx(Y,{size:"xl",color:"white"})}):(t==null?void 0:t.length)!==0?e.jsx(v,{direction:"column",spacing:2,children:t==null?void 0:t.map(a=>e.jsx(te,{name:a.item.name,description:`Listed on ${ie(a.created_at).format("D MMMM")}`,price:`${(a.max_price/100).toFixed(2)}$`,preview:`https://api.silentclient.net${a.item.preview}`,href:`/listings/${a.item_type}/${a.item_id}`,footer:e.jsx(Q,{opacity:"0.8",textDecoration:"underline",_hover:{opacity:"1"},fontSize:"md",onClick:async()=>{try{await D.post(`https://api.silentclient.net/marketplace/item/${a.item_type}/${a.item_id}/delete_order`,{id:a.id},{headers:{Authorization:`Bearer ${s.props.accessToken}`}})}catch(d){P(d,r)}finally{c()}},children:"Remove"})}))}):e.jsx(w,{minH:"48px",children:e.jsx(I,{size:"sm",children:"Buy orders not found"})})}function pt(){const s=u.useContext(R),t=De.forwardRef((n,l)=>{const o=Xe({...n,ref:l}),r=!!o["aria-selected"];return e.jsx(O,{w:"full",h:"35px",fontSize:"xl",borderRadius:"8px",paddingInlineStart:6,paddingInlineEnd:6,_hover:{bgColor:r?"#252525":"#202020"},bgColor:r?"#252525":"#131313",...o,children:o.children})});return e.jsxs(e.Fragment,{children:[e.jsx(et,{}),e.jsxs(Me,{maxW:["full","container.md"],paddingInlineStart:0,paddingInlineEnd:0,mt:5,children:[s.props.account&&e.jsxs(V,{w:"full",variant:"soft-rounded",colorScheme:"whiteAlpha",isLazy:!0,children:[e.jsx(W,{w:"full",children:e.jsxs(H,{w:"full",alignItems:"center",columns:2,spacing:2,children:[e.jsx(t,{children:"My sell listings"}),e.jsx(t,{children:"My buy orders"})]})}),e.jsxs(X,{mt:2,children:[e.jsx(k,{p:0,children:e.jsx(tt,{})}),e.jsx(k,{p:0,children:e.jsx(nt,{})})]})]}),e.jsxs(V,{mt:5,w:"full",variant:"soft-rounded",colorScheme:"whiteAlpha",isLazy:!0,children:[e.jsx(W,{w:"full",children:e.jsxs(H,{w:"full",columns:[2,3],spacing:2,children:[e.jsx(t,{children:"Popular Items"}),e.jsx(t,{children:"Recently Listed"}),e.jsx(t,{gridColumn:["1/3","3/3"],children:"Recently Sold"})]})}),e.jsxs(X,{mt:2,children:[e.jsx(k,{p:0,children:e.jsx(U,{showSearch:!0,apiUrl:"https://api.silentclient.net/marketplace/items?filter=popular",footer:n=>n.last_seller?e.jsxs(_,{textAlign:"right",fontSize:"md",opacity:"0.8",children:["Last Seller: ",e.jsx("br",{}),n.last_seller]}):e.jsx(e.Fragment,{})})}),e.jsx(k,{p:0,children:e.jsx(U,{showSearch:!0,apiUrl:"https://api.silentclient.net/marketplace/items?filter=listed",footer:n=>n.last_seller?e.jsxs(_,{textAlign:"right",fontSize:"md",opacity:"0.8",children:["Last Seller: ",e.jsx("br",{}),n.last_seller]}):e.jsx(e.Fragment,{})})}),e.jsx(k,{p:0,children:e.jsx(U,{showSearch:!0,apiUrl:"https://api.silentclient.net/marketplace/items?filter=sold",footer:n=>n.last_seller?e.jsxs(_,{textAlign:"right",fontSize:"md",opacity:"0.8",children:["Last Seller: ",e.jsx("br",{}),n.last_seller]}):e.jsx(e.Fragment,{})})})]})]})]})]})}export{pt as default};
