import{r as o,A as u,j as t,C as p,h as x,S as f,L as y,d as c,H as $}from"./index-34628936.js";import{h as j}from"./moment-fbc5633a.js";import{u as k,e as m}from"./utils-83cd76fa.js";import{M as _}from"./Main-2747c11e.js";import{u as g}from"./chunk-BBVTFCMB-66dd3b93.js";import"./chunk-QINAG4RG-b1bd8399.js";import"./index-836fb061.js";import"./chunk-PULVB27S-74ef8337.js";import"./chunk-6CVSDS6C-933f9709.js";import"./chunk-UVUR7MCU-b2dbaa10.js";import"./index-e6f52d7d.js";import"./chunk-5MKCW436-556f32d7.js";import"./chunk-NEK3OOAM-b857783c.js";function I(){const s=o.useContext(u),[r,d]=o.useState([]),[l,a]=g(!0),i=k(),n=async()=>{a.on();try{const{data:e}=await c.get("https://api.silentclient.net/marketplace/my_orders",{headers:{Authorization:`Bearer ${s.props.accessToken}`}});d(e.items)}catch(e){m(e,i)}finally{a.off()}};return o.useEffect(()=>{n()},[]),l?t.jsx(p,{w:"full",p:2,children:t.jsx(x,{size:"xl",color:"white"})}):(r==null?void 0:r.length)!==0?t.jsx(f,{direction:"column",spacing:2,children:r==null?void 0:r.map(e=>t.jsx(_,{name:e.item.name,description:`Listed on ${j(e.created_at).format("D MMMM")}`,price:`${(e.max_price/100).toFixed(2)}$`,preview:`https://api.silentclient.net${e.item.preview}`,href:`/listings/${e.item_type}/${e.item_id}`,footer:t.jsx(y,{opacity:"0.8",textDecoration:"underline",_hover:{opacity:"1"},fontSize:"md",onClick:async()=>{try{await c.post(`https://api.silentclient.net/marketplace/item/${e.item_type}/${e.item_id}/delete_order`,{id:e.id},{headers:{Authorization:`Bearer ${s.props.accessToken}`}})}catch(h){m(h,i)}finally{n()}},children:"Remove"})}))}):t.jsx(p,{minH:"48px",children:t.jsx($,{size:"sm",children:"Buy orders not found"})})}export{I as default};
