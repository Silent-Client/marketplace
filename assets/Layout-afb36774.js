import{R as f,r as l,A as _,a as w,j as e,S as y,_ as N,u as $,C as b,L as j,b as v,I as H,c as R,d as D,O as V}from"./index-334d877a.js";import{u as W}from"./chunk-BBVTFCMB-ede98c8d.js";import{u as B,e as G}from"./utils-20123f34.js";import{M as U,a as q,b as J,c as K,d as Q,e as X,u as Y}from"./chunk-4FCEGNGT-56d870f0.js";import{F as P,I as k,a as I}from"./chunk-6CVSDS6C-856dbc30.js";import{F as z}from"./chunk-GCOAS5YC-2977a4b3.js";import{B as O}from"./chunk-UVUR7MCU-20f68384.js";import{I as Z}from"./chunk-QINAG4RG-1689f580.js";import{B as S}from"./chunk-PULVB27S-7adda51e.js";import{B as ee}from"./chunk-Z6RXEUPO-e0b5e5b9.js";var T={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},E=f.createContext&&f.createContext(T),m=globalThis&&globalThis.__assign||function(){return m=Object.assign||function(t){for(var r,o=1,n=arguments.length;o<n;o++){r=arguments[o];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(t[a]=r[a])}return t},m.apply(this,arguments)},te=globalThis&&globalThis.__rest||function(t,r){var o={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(o[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,n=Object.getOwnPropertySymbols(t);a<n.length;a++)r.indexOf(n[a])<0&&Object.prototype.propertyIsEnumerable.call(t,n[a])&&(o[n[a]]=t[n[a]]);return o};function L(t){return t&&t.map(function(r,o){return f.createElement(r.tag,m({key:o},r.attr),L(r.child))})}function M(t){return function(r){return f.createElement(ne,m({attr:m({},t.attr)},r),L(t.child))}}function ne(t){var r=function(o){var n=t.attr,a=t.size,c=t.title,u=te(t,["attr","size","title"]),s=a||o.size||"1em",h;return o.className&&(h=o.className),t.className&&(h=(h?h+" ":"")+t.className),f.createElement("svg",m({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},o.attr,n,u,{className:h,style:m(m({color:t.color||o.color},o.style),t.style),height:s,width:s,xmlns:"http://www.w3.org/2000/svg"}),c&&f.createElement("title",null,c),t.children)};return E!==void 0?f.createElement(E.Consumer,null,function(o){return r(o)}):r(T)}function re(t){return M({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 512c35.32 0 63.97-28.65 63.97-64H160.03c0 35.35 28.65 64 63.97 64zm215.39-149.71c-19.32-20.76-55.47-51.99-55.47-154.29 0-77.7-54.48-139.9-127.94-155.16V32c0-17.67-14.32-32-31.98-32s-31.98 14.33-31.98 32v20.84C118.56 68.1 64.08 130.3 64.08 208c0 102.3-36.15 133.53-55.47 154.29-6 6.45-8.66 14.16-8.61 21.71.11 16.4 12.98 32 32.1 32h383.8c19.12 0 32-15.6 32.1-32 .05-7.55-2.61-15.27-8.61-21.71z"}}]})(t)}function oe(t){return M({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"}}]})(t)}function ae({isOpen:t,onClose:r}){const o=l.useContext(_),[n,a]=l.useState(""),[c,u]=l.useState(null),[s,h]=l.useState(),[A,g]=W(!1),C=B();return l.useEffect(()=>{const p=setTimeout(async()=>{var x,d;if(n.trim()===""){u(null);return}try{g.on();const{data:i}=await w.get(`https://api.silentclient.net/promos/get?promo=${n}`);if(i.promo.max_activated&&i.promo.activated>=i.promo.max_activated){C({title:"Error!",description:"Promo has already been activated!",status:"error",duration:3e3,isClosable:!0}),u(null);return}u(i.promo)}catch(i){if(i!=null&&i.response&&((x=i.response)!=null&&x.data)&&((d=i.response.data)!=null&&d.errors))for(const F of i.response.data.errors)C({title:"Error!",description:F.message,status:"error",duration:3e3,isClosable:!0});u(null)}finally{g.off()}},500);return()=>clearTimeout(p)},[n]),e.jsxs(U,{isOpen:t,onClose:r,children:[e.jsx(q,{}),e.jsxs(J,{pt:0,bgColor:"#131313",children:[e.jsx(K,{children:"Balance replenishment"}),e.jsx(Q,{}),e.jsx(X,{mb:2,children:e.jsxs(y,{direction:"column",spacing:2,children:[e.jsxs(P,{children:[e.jsx(z,{children:"Amount"}),e.jsx(k,{value:s,onChange:p=>h(Number(p.currentTarget.value)),type:"number",placeholder:"Amount"}),e.jsx(I,{children:"Minimum amount 0.50$"})]}),e.jsxs(P,{children:[e.jsx(z,{children:"Promo Code"}),e.jsx(k,{value:n,onChange:p=>a(p.currentTarget.value),placeholder:"Promo Code"}),c&&e.jsxs(I,{color:"green",children:["+",c.multiplier,"%"]})]}),e.jsx(O,{onClick:async()=>{var p,x;try{g.on();const{data:d}=await w.post("https://api.silentclient.net/balance/add",{amount:(s||0)*100,promo:(c==null?void 0:c.promo)||null,currency:"usd"},{headers:{Authorization:`Bearer ${o.props.accessToken}`}});window.location.href=d.payUrl}catch(d){if(d!=null&&d.response&&((p=d.response)!=null&&p.data)&&((x=d.response.data)!=null&&x.errors))for(const i of d.response.data.errors)C({title:"Error!",description:i.message,status:"error",duration:3e3,isClosable:!0})}finally{g.off()}},isDisabled:A,children:"Pay"})]})})]})]})}const se=l.lazy(()=>N(()=>import("./AccountMenu-410e1895.js"),["assets/AccountMenu-410e1895.js","assets/index-334d877a.js","assets/index-a1d4600f.css","assets/index-9517f578.js","assets/chunk-UVUR7MCU-20f68384.js","assets/chunk-4FCEGNGT-56d870f0.js","assets/chunk-QINAG4RG-1689f580.js"])),ie=[{name:"Marketplace",href:"/"},{name:"Cases",href:"/cases"},{name:"Premium",href:"/premium"},{name:"About",href:"/about"}];function le(){const t=$(),r=l.useContext(_),{isOpen:o,onOpen:n,onClose:a}=Y(),[c,u]=l.useState(0);return l.useEffect(()=>{(async()=>{if(r.props.account)try{const{data:h}=await w.get("https://api.silentclient.net/marketplace/unreaded_deals",{headers:{Authorization:`Bearer ${r.props.accessToken}`}});u(h.count)}catch{}})()},[t.pathname]),e.jsxs(y,{bgColor:"black",h:"80px",w:"full",position:"fixed",paddingInlineStart:"20px",paddingInlineEnd:"20px",alignItems:"center",textAlign:"center",alignContent:"center",direction:"row",justifyContent:"space-between",as:"header",zIndex:5,children:[e.jsx(b,{w:"full",h:"full",justifyContent:"start",children:e.jsx(j,{w:"auto",userSelect:"none",as:v,to:"/",children:e.jsx(Z,{h:"39px",w:"auto",src:"https://assets.silentclient.net/logos/logo.svg",alt:"Silent Client"})})}),e.jsx(b,{justifyContent:"center",w:"full",h:"full",display:["none","flex"],children:e.jsx(y,{direction:"row",spacing:4,children:ie.map(s=>e.jsx(j,{fontSize:"lg",color:"white",fontWeight:"bold",opacity:t.pathname===s.href?"1":"0.5",_hover:{opacity:t.pathname===s.href?"1":"0.9",textDecoration:"none"},as:v,to:s.href,children:s.name}))})}),e.jsx(b,{w:"full",h:"full",justifyContent:"end",children:e.jsx(y,{alignItems:"center",direction:"row",spacing:2,children:r.props.account&&e.jsxs(e.Fragment,{children:[e.jsx(S,{children:e.jsxs(j,{bgColor:"rgba(255, 255, 255, 0.1)",borderRadius:"5px",p:"5px 10px",border:"1px solid transparent",_hover:{borderColor:"white"},display:["none","block"],onClick:n,children:[e.jsx(H,{children:e.jsx(oe,{})}),((r.props.account.partner_balance||0)/100).toFixed(2),"$"," "]})}),e.jsxs(j,{as:v,to:"/deals",children:[c!==0&&e.jsx(ee,{bgColor:"red",color:"white",borderRadius:"999px",top:"24px",zIndex:4,position:"absolute",children:c}),e.jsx(re,{size:24})]}),e.jsx(l.Suspense,{fallback:e.jsx(e.Fragment,{}),children:e.jsx(se,{})})]})||e.jsx(O,{variant:"outline",minWidth:["60px","70px"],borderColor:"white",onClick:()=>{window.location.href=`https://auth.silentclient.net/login?redirect_url=${window.location.href}`},children:"Login"})})}),e.jsx(ae,{isOpen:o,onClose:a})]})}function ce({children:t}){const[r,o]=R(),n=l.useContext(_),a=B();return l.useEffect(()=>{(async()=>{if(r.get("access_token")&&n.setProps){const u=r.get("access_token");if(o({}),u!=="null")try{const{data:s}=await w.get("https://api.silentclient.net/account",{headers:{Authorization:`Bearer ${u}`}});n.setProps({account:s.account,accessToken:u,isLoading:!1})}catch(s){G(s,a),n.setProps({account:null,accessToken:null,isLoading:!1})}else n.setProps({account:null,accessToken:null,isLoading:!1})}else window.location.href=`https://auth.silentclient.net/login?redirect_url=${window.location.href}&force_redirect=1`})()},[]),n.props.isLoading?e.jsx(b,{minH:"100vh",children:e.jsx(D,{size:"xl",color:"white"})}):t}function be(){return l.useEffect(()=>{window.scrollTo(0,0)},[location.pathname]),e.jsx(e.Fragment,{children:e.jsxs(ce,{children:[e.jsx(le,{}),e.jsx(S,{paddingInlineStart:[4,"20px"],paddingInlineEnd:[4,"20px"],pt:"85px",children:e.jsx(V,{})})]})})}export{be as default};
