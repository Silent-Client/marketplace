import{u as F,r as d,d as ye,c as G,b as K,v as je,i as M,e as Ce,o as ve,j as e,h as L,k as z,S as v,C as k,H as _,T,L as Q,q as ke,A as E,t as X,n as I,w as we,R as Se}from"./index-ed535aa6.js";import{I as se}from"./chunk-QINAG4RG-154b9d90.js";import{u as J,e as D}from"./utils-5c7b6136.js";import{b as Te}from"./index-8a324392.js";import{B as O}from"./chunk-PULVB27S-4090439d.js";import{u as Y}from"./chunk-BBVTFCMB-651e14f7.js";import{I as _e}from"./chunk-6CVSDS6C-b5939784.js";import{h as re}from"./moment-fbc5633a.js";import{m as le,B as H}from"./chunk-UVUR7MCU-21a34eee.js";import{c as Ie,l as De}from"./index-643b5831.js";import{C as Pe}from"./chunk-5MKCW436-00c2ddc6.js";import{S as oe}from"./chunk-NEK3OOAM-db070d5a.js";function Me(s){const{value:n,defaultValue:t,onChange:i,shouldUpdate:o=(h,p)=>h!==p}=s,r=F(i),c=F(o),[a,u]=d.useState(t),f=n!==void 0,b=f?n:a,g=F(h=>{const y=typeof h=="function"?h(b):h;c(b,y)&&(f||u(y),r(y))},[f,r,b,c]);return[b,g]}function Le(){const s=d.useRef(new Map),n=s.current,t=d.useCallback((o,r,c,a)=>{s.current.set(c,{type:r,el:o,options:a}),o.addEventListener(r,c,a)},[]),i=d.useCallback((o,r,c,a)=>{o.removeEventListener(r,c,a),s.current.delete(c)},[]);return d.useEffect(()=>()=>{n.forEach((o,r)=>{i(o.el,o.type,r,o.options)})},[i,n]),{add:t,remove:i}}function N(s){const n=s.target,{tagName:t,isContentEditable:i}=n;return t!=="INPUT"&&t!=="TEXTAREA"&&i!==!0}function ze(s={}){const{ref:n,isDisabled:t,isFocusable:i,clickOnEnter:o=!0,clickOnSpace:r=!0,onMouseDown:c,onMouseUp:a,onClick:u,onKeyDown:f,onKeyUp:b,tabIndex:g,onMouseOver:h,onMouseLeave:p,...y}=s,[j,S]=d.useState(!0),[C,x]=d.useState(!1),m=Le(),de=l=>{l&&l.tagName!=="BUTTON"&&S(!1)},ue=j?g:g||0,R=t&&!i,te=d.useCallback(l=>{if(t){l.stopPropagation(),l.preventDefault();return}l.currentTarget.focus(),u==null||u(l)},[t,u]),A=d.useCallback(l=>{C&&N(l)&&(l.preventDefault(),l.stopPropagation(),x(!1),m.remove(document,"keyup",A,!1))},[C,m]),fe=d.useCallback(l=>{if(f==null||f(l),t||l.defaultPrevented||l.metaKey||!N(l.nativeEvent)||j)return;const P=o&&l.key==="Enter";r&&l.key===" "&&(l.preventDefault(),x(!0)),P&&(l.preventDefault(),l.currentTarget.click()),m.add(document,"keyup",A,!1)},[t,j,f,o,r,m,A]),pe=d.useCallback(l=>{if(b==null||b(l),t||l.defaultPrevented||l.metaKey||!N(l.nativeEvent)||j)return;r&&l.key===" "&&(l.preventDefault(),x(!1),l.currentTarget.click())},[r,j,t,b]),B=d.useCallback(l=>{l.button===0&&(x(!1),m.remove(document,"mouseup",B,!1))},[m]),he=d.useCallback(l=>{if(l.button!==0)return;if(t){l.stopPropagation(),l.preventDefault();return}j||x(!0),l.currentTarget.focus({preventScroll:!0}),m.add(document,"mouseup",B,!1),c==null||c(l)},[t,j,c,m,B]),xe=d.useCallback(l=>{l.button===0&&(j||x(!1),a==null||a(l))},[a,j]),me=d.useCallback(l=>{if(t){l.preventDefault();return}h==null||h(l)},[t,h]),be=d.useCallback(l=>{C&&(l.preventDefault(),x(!1)),p==null||p(l)},[C,p]),ne=le(n,de);return j?{...y,ref:ne,type:"button","aria-disabled":R?void 0:t,disabled:R,onClick:te,onMouseDown:c,onMouseUp:a,onKeyUp:b,onKeyDown:f,onMouseOver:h,onMouseLeave:p}:{...y,ref:ne,role:"button","data-active":ye(C),"aria-disabled":t?"true":void 0,tabIndex:R?void 0:ue,onClick:te,onMouseDown:he,onMouseUp:xe,onKeyUp:pe,onKeyDown:fe,onMouseOver:me,onMouseLeave:be}}var[Ee,$e,Re,Ae]=Ie();function Be(s){var n;const{defaultIndex:t,onChange:i,index:o,isManual:r,isLazy:c,lazyBehavior:a="unmount",orientation:u="horizontal",direction:f="ltr",...b}=s,[g,h]=d.useState(t??0),[p,y]=Me({defaultValue:t??0,value:o,onChange:i});d.useEffect(()=>{o!=null&&h(o)},[o]);const j=Re(),S=d.useId();return{id:`tabs-${(n=s.id)!=null?n:S}`,selectedIndex:p,focusedIndex:g,setSelectedIndex:y,setFocusedIndex:h,isManual:r,isLazy:c,lazyBehavior:a,orientation:u,descendants:j,direction:f,htmlProps:b}}var[Fe,$]=G({name:"TabsContext",errorMessage:"useTabsContext: `context` is undefined. Seems you forgot to wrap all tabs components within <Tabs />"});function Ne(s){const{focusedIndex:n,orientation:t,direction:i}=$(),o=$e(),r=d.useCallback(c=>{const a=()=>{var x;const m=o.nextEnabled(n);m&&((x=m.node)==null||x.focus())},u=()=>{var x;const m=o.prevEnabled(n);m&&((x=m.node)==null||x.focus())},f=()=>{var x;const m=o.firstEnabled();m&&((x=m.node)==null||x.focus())},b=()=>{var x;const m=o.lastEnabled();m&&((x=m.node)==null||x.focus())},g=t==="horizontal",h=t==="vertical",p=c.key,y=i==="ltr"?"ArrowLeft":"ArrowRight",j=i==="ltr"?"ArrowRight":"ArrowLeft",C={[y]:()=>g&&u(),[j]:()=>g&&a(),ArrowDown:()=>h&&a(),ArrowUp:()=>h&&u(),Home:f,End:b}[p];C&&(c.preventDefault(),C(c))},[o,n,t,i]);return{...s,role:"tablist","aria-orientation":t,onKeyDown:K(s.onKeyDown,r)}}function Ue(s){const{isDisabled:n=!1,isFocusable:t=!1,...i}=s,{setSelectedIndex:o,isManual:r,id:c,setFocusedIndex:a,selectedIndex:u}=$(),{index:f,register:b}=Ae({disabled:n&&!t}),g=f===u,h=()=>{o(f)},p=()=>{a(f),!r&&!(n&&t)&&o(f)},y=ze({...i,ref:le(b,s.ref),isDisabled:n,isFocusable:t,onClick:K(s.onClick,h)}),j="button";return{...y,id:ie(c,f),role:"tab",tabIndex:g?0:-1,type:j,"aria-selected":g,"aria-controls":ce(c,f),onFocus:n?void 0:K(s.onFocus,p)}}var[Ke,Oe]=G({});function He(s){const n=$(),{id:t,selectedIndex:i}=n,r=je(s.children).map((c,a)=>d.createElement(Ke,{key:a,value:{isSelected:a===i,id:ce(t,a),tabId:ie(t,a),selectedIndex:i}},c));return{...s,children:r}}function Ve(s){const{children:n,...t}=s,{isLazy:i,lazyBehavior:o}=$(),{isSelected:r,id:c,tabId:a}=Oe(),u=d.useRef(!1);r&&(u.current=!0);const f=De({wasSelected:u.current,isSelected:r,enabled:i,mode:o});return{tabIndex:0,...t,children:f?n:null,role:"tabpanel","aria-labelledby":a,hidden:!r,id:c}}function ie(s,n){return`${s}--tab-${n}`}function ce(s,n){return`${s}--tabpanel-${n}`}var[We,Z]=G({name:"TabsStylesContext",errorMessage:`useTabsStyles returned is 'undefined'. Seems you forgot to wrap the components in "<Tabs />" `}),V=M(function(n,t){const i=Ce("Tabs",n),{children:o,className:r,...c}=ve(n),{htmlProps:a,descendants:u,...f}=Be(c),b=d.useMemo(()=>f,[f]),{isFitted:g,...h}=a,p={position:"relative",...i.root};return e.jsx(Ee,{value:u,children:e.jsx(Fe,{value:b,children:e.jsx(We,{value:i,children:e.jsx(L.div,{className:z("chakra-tabs",r),ref:t,...h,__css:p,children:o})})})})});V.displayName="Tabs";var W=M(function(n,t){const i=Ne({...n,ref:t}),r={display:"flex",...Z().tablist};return e.jsx(L.div,{...i,className:z("chakra-tabs__tablist",n.className),__css:r})});W.displayName="TabList";var w=M(function(n,t){const i=Ve({...n,ref:t}),o=Z();return e.jsx(L.div,{outline:"0",...i,className:z("chakra-tabs__tab-panel",n.className),__css:o.tabpanel})});w.displayName="TabPanel";var q=M(function(n,t){const i=He(n),o=Z();return e.jsx(L.div,{...i,width:"100%",ref:t,className:z("chakra-tabs__tab-panels",n.className),__css:o.tabpanels})});q.displayName="TabPanels";const ae="/assets/minecraft_hero-62e653dc.png";function qe(){return e.jsxs(v,{zIndex:2,h:["auto","30vh"],direction:["column","row"],justifyContent:"space-between",spacing:[4,2],alignItems:"center",children:[e.jsx(k,{display:["none","flex"],position:"absolute",w:"full",top:"70px",justifyContent:"start",children:e.jsx(se,{w:"30%",src:ae})}),e.jsx(k,{position:["unset","absolute"],w:"full",h:"full",justifyContent:"center",children:e.jsxs(v,{textAlign:"center",direction:"column",spacing:[1,2],children:[e.jsx(_,{size:"lg",fontWeight:500,children:"Welcome to SIlent Client Marketplace! ðŸ‘‹"}),e.jsx(T,{fontSize:"xl",opacity:"0.8",children:"Buy and sell cosmetics in a few clicks"})]})}),e.jsx(k,{display:["flex","none"],children:e.jsx(se,{ml:"40px",w:"300px",src:ae})})]})}function ee(s){const n=d.useRef(null),t=d.useRef(null),i=d.useRef(null);return d.useEffect(()=>{var o;(o=n.current)==null||o.addEventListener("click",function(r){var c,a;((c=t.current)!=null&&c.matches(":hover")||(a=i.current)!=null&&a.matches(":hover"))&&r.preventDefault()})},[]),e.jsxs(Q,{ref:n,zIndex:3,bgColor:"#131313",p:2,borderRadius:"10px",border:"1px solid",borderColor:"transparent",_hover:{borderColor:"white",textDecoration:"none"},as:ke,to:s.href,children:[e.jsxs(v,{alignItems:"center",direction:"row",justifyContent:"space-between",children:[e.jsxs(v,{direction:"row",alignItems:"center",spacing:2,children:[e.jsx(Te.LazyLoadImage,{src:s.preview,width:"80px",height:"80px"}),e.jsxs(v,{direction:"column",spacing:0,children:[e.jsx(_,{size:"sm",children:s.name}),e.jsx(T,{opacity:"0.8",fontSize:"md",children:s.description}),e.jsx(_,{size:"sm",children:s.price})]})]}),s.footer&&e.jsx(O,{display:["none","block"],ref:t,children:s.footer})||null]}),s.footer&&e.jsx(O,{display:["block","none"],alignContent:"end",textAlign:"end",ref:i,children:s.footer})||null]})}function U({apiUrl:s,description:n=r=>`Quantity: ${r.count}`,price:t=r=>`Started at ${(r.min_price/100).toFixed(2)}$`,footer:i,showSearch:o}){const r=d.useContext(E),[c,a]=d.useState([]),[u,f]=Y(!0),b=J(),[g,h]=d.useState("");return d.useEffect(()=>{(async()=>{f.on();try{const{data:y}=await I.get(s,{headers:{Authorization:`Bearer ${r.props.accessToken}`}});a(y.items)}catch(y){D(y,b)}finally{f.off()}})()},[]),u?e.jsx(k,{w:"full",p:2,children:e.jsx(X,{size:"xl",color:"white"})}):e.jsxs(v,{direction:"column",spacing:2,children:[o&&e.jsx(_e,{h:"35px",bgColor:"#131313",borderColor:"transparent",borderRadius:"8px",placeholder:"Search",fontSize:"xl",_placeholder:{color:"rgba(255, 255, 255, 0.60)"},_hover:{borderColor:"transparent",bgColor:"whiteAlpha.300"},_focus:{borderColor:"white",boxShadow:"none",bgColor:"#252525"},value:g,onChange:p=>h(p.currentTarget.value)}),c==null?void 0:c.filter(p=>g.trim()===""||p.name.toLowerCase().includes(g.toLowerCase().trim())).map(p=>e.jsx(ee,{name:p.name,description:n(p),price:t(p),preview:`https://api.silentclient.net${p.preview}`,href:`/listings/${p.type}/${p.id}`,footer:i?i(p):void 0}))]})}function Ge(){const s=d.useContext(E),[n,t]=d.useState([]),[i,o]=Y(!0),r=J(),c=we(),a=async()=>{o.on();try{const{data:u}=await I.get("https://api.silentclient.net/marketplace/my_lots",{headers:{Authorization:`Bearer ${s.props.accessToken}`}});t(u.items)}catch(u){D(u,r)}finally{o.off()}};return d.useEffect(()=>{a()},[]),i?e.jsx(k,{w:"full",p:2,children:e.jsx(X,{size:"xl",color:"white"})}):(n==null?void 0:n.length)!==0?e.jsxs(v,{direction:"column",spacing:2,children:[e.jsx(H,{w:"full",h:"35px",fontSize:"xl",borderRadius:"8px",paddingInlineStart:6,paddingInlineEnd:6,_hover:{bgColor:"#202020"},_active:{bgColor:"#252525"},bgColor:"#131313",onClick:()=>c("/sell"),children:"Sell Item"}),n==null?void 0:n.map(u=>e.jsx(ee,{name:u.item.name,description:`Listed on ${re(u.created_at).format("D MMMM")}`,price:`${(u.price/100).toFixed(2)}$`,preview:`https://api.silentclient.net${u.item.preview}`,href:`/listings/${u.item_type}/${u.item_id}`,footer:e.jsx(Q,{opacity:"0.8",textDecoration:"underline",_hover:{opacity:"1"},fontSize:"md",onClick:async()=>{try{await I.post(`https://api.silentclient.net/marketplace/item/${u.item_type}/${u.item_id}/delete_lot`,{id:u.id},{headers:{Authorization:`Bearer ${s.props.accessToken}`}})}catch(f){D(f,r)}finally{a()}},children:"Remove"})}))]}):e.jsx(k,{minH:"48px",children:e.jsxs(v,{alignItems:"center",direction:"column",spacing:1,children:[e.jsx(_,{size:"sm",children:"Sell listings not found"}),e.jsx(O,{children:e.jsx(H,{borderRadius:"8px",paddingInlineStart:6,paddingInlineEnd:6,_hover:{bgColor:"#202020"},_active:{bgColor:"#252525"},bgColor:"#131313",h:"28px",fontSize:"md",onClick:()=>c("/sell"),children:"Sell Item"})})]})})}function Qe(){const s=d.useContext(E),[n,t]=d.useState([]),[i,o]=Y(!0),r=J(),c=async()=>{o.on();try{const{data:a}=await I.get("https://api.silentclient.net/marketplace/my_orders",{headers:{Authorization:`Bearer ${s.props.accessToken}`}});t(a.items)}catch(a){D(a,r)}finally{o.off()}};return d.useEffect(()=>{c()},[]),i?e.jsx(k,{w:"full",p:2,children:e.jsx(X,{size:"xl",color:"white"})}):(n==null?void 0:n.length)!==0?e.jsx(v,{direction:"column",spacing:2,children:n==null?void 0:n.map(a=>e.jsx(ee,{name:a.item.name,description:`Listed on ${re(a.created_at).format("D MMMM")}`,price:`${(a.max_price/100).toFixed(2)}$`,preview:`https://api.silentclient.net${a.item.preview}`,href:`/listings/${a.item_type}/${a.item_id}`,footer:e.jsx(Q,{opacity:"0.8",textDecoration:"underline",_hover:{opacity:"1"},fontSize:"md",onClick:async()=>{try{await I.post(`https://api.silentclient.net/marketplace/item/${a.item_type}/${a.item_id}/delete_order`,{id:a.id},{headers:{Authorization:`Bearer ${s.props.accessToken}`}})}catch(u){D(u,r)}finally{c()}},children:"Remove"})}))}):e.jsx(k,{minH:"48px",children:e.jsx(_,{size:"sm",children:"Buy orders not found"})})}function ct(){const s=d.useContext(E),n=Se.forwardRef((t,i)=>{const o=Ue({...t,ref:i}),r=!!o["aria-selected"];return e.jsx(H,{w:"full",h:"35px",fontSize:"xl",borderRadius:"8px",paddingInlineStart:6,paddingInlineEnd:6,_hover:{bgColor:r?"#252525":"#202020"},bgColor:r?"#252525":"#131313",...o,children:o.children})});return e.jsxs(e.Fragment,{children:[e.jsx(qe,{}),e.jsxs(Pe,{maxW:["full","container.md"],paddingInlineStart:0,paddingInlineEnd:0,mt:5,children:[s.props.account&&e.jsxs(V,{w:"full",variant:"soft-rounded",colorScheme:"whiteAlpha",isLazy:!0,children:[e.jsx(W,{w:"full",children:e.jsxs(oe,{w:"full",alignItems:"center",columns:2,spacing:2,children:[e.jsx(n,{children:"My sell listings"}),e.jsx(n,{children:"My buy orders"})]})}),e.jsxs(q,{mt:2,children:[e.jsx(w,{p:0,children:e.jsx(Ge,{})}),e.jsx(w,{p:0,children:e.jsx(Qe,{})})]})]}),e.jsxs(V,{mt:5,w:"full",variant:"soft-rounded",colorScheme:"whiteAlpha",isLazy:!0,children:[e.jsx(W,{w:"full",children:e.jsxs(oe,{w:"full",columns:[2,3],spacing:2,children:[e.jsx(n,{children:"Popular Items"}),e.jsx(n,{children:"Recently Listed"}),e.jsx(n,{gridColumn:["1/3","3/3"],children:"Recently Sold"})]})}),e.jsxs(q,{mt:2,children:[e.jsx(w,{p:0,children:e.jsx(U,{showSearch:!0,apiUrl:"https://api.silentclient.net/marketplace/items?filter=popular",footer:t=>t.last_seller?e.jsxs(T,{textAlign:"right",fontSize:"md",opacity:"0.8",children:["Last Seller: ",e.jsx("br",{}),t.last_seller]}):e.jsx(e.Fragment,{})})}),e.jsx(w,{p:0,children:e.jsx(U,{showSearch:!0,apiUrl:"https://api.silentclient.net/marketplace/items?filter=listed",footer:t=>t.last_seller?e.jsxs(T,{textAlign:"right",fontSize:"md",opacity:"0.8",children:["Last Seller: ",e.jsx("br",{}),t.last_seller]}):e.jsx(e.Fragment,{})})}),e.jsx(w,{p:0,children:e.jsx(U,{showSearch:!0,apiUrl:"https://api.silentclient.net/marketplace/items?filter=sold",footer:t=>t.last_seller?e.jsxs(T,{textAlign:"right",fontSize:"md",opacity:"0.8",children:["Last Seller: ",e.jsx("br",{}),t.last_seller]}):e.jsx(e.Fragment,{})})})]})]})]})]})}export{ct as default};
